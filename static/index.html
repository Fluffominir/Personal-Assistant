
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATLAS - Your AI Companion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #252525;
            --bg-glass: rgba(255, 255, 255, 0.05);
            --bg-glass-strong: rgba(255, 255, 255, 0.08);
            --bg-glass-stronger: rgba(255, 255, 255, 0.12);
            
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --text-muted: #a0a0a0;
            --text-accent: #7a7a7a;
            
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-error: #ef4444;
            --accent-info: #06b6d4;
            
            --gradient-primary: linear-gradient(135deg, #6366f1, #8b5cf6);
            --gradient-secondary: linear-gradient(135deg, #10b981, #06b6d4);
            --gradient-warm: linear-gradient(135deg, #f59e0b, #ef4444);
            --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            
            --border-glass: rgba(255, 255, 255, 0.15);
            --border-glass-light: rgba(255, 255, 255, 0.08);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-2xl: 24px;
            --radius-full: 9999px;
            
            --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.3);
            --shadow-glass-lg: 0 20px 60px rgba(0, 0, 0, 0.4);
            --shadow-glow: 0 0 40px rgba(99, 102, 241, 0.2);
            
            --blur-sm: blur(8px);
            --blur-md: blur(16px);
            --blur-lg: blur(24px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            font-feature-settings: 'cv01', 'cv02';
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            display: grid;
            grid-template-columns: 280px 1fr;
            height: 100vh;
            gap: 0;
        }

        /* Enhanced Glassmorphism Sidebar */
        .sidebar {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: var(--blur-md);
            border-right: 1px solid var(--border-glass);
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 100;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-glass);
            opacity: 0.5;
            pointer-events: none;
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            text-align: center;
            border-bottom: 1px solid var(--border-glass-light);
            position: relative;
            z-index: 2;
        }

        .ai-avatar {
            width: 72px;
            height: 72px;
            border-radius: var(--radius-full);
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
            box-shadow: var(--shadow-glow);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }

        .ai-avatar:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 0 60px rgba(99, 102, 241, 0.4);
        }

        .ai-avatar::before {
            content: '';
            position: absolute;
            inset: -2px;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            z-index: -1;
            opacity: 0.3;
            animation: pulse-glow 3s ease-in-out infinite;
        }

        .ai-avatar i {
            font-size: 2rem;
            color: white;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3));
        }

        @keyframes pulse-glow {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.15); opacity: 0.6; }
        }

        .ai-name {
            font-size: 1.75rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .ai-status {
            color: var(--text-muted);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: var(--radius-full);
            background: var(--accent-success);
            animation: breathe 2s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.3); }
        }

        .nav-menu {
            padding: 1rem;
            flex: 1;
            position: relative;
            z-index: 2;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.875rem;
            padding: 0.875rem 1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            margin-bottom: 0.25rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: var(--blur-sm);
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 0;
            background: var(--gradient-primary);
            transition: width 0.3s ease;
        }

        .nav-item:hover {
            background: var(--bg-glass-strong);
            transform: translateX(6px);
            box-shadow: var(--shadow-glass);
        }

        .nav-item:hover::before {
            width: 3px;
        }

        .nav-item.active {
            background: rgba(99, 102, 241, 0.15);
            color: var(--accent-primary);
            box-shadow: var(--shadow-glass);
        }

        .nav-item.active::before {
            width: 3px;
        }

        .nav-item i {
            font-size: 1rem;
            width: 18px;
            text-align: center;
            z-index: 1;
        }

        .nav-item span {
            z-index: 1;
            font-size: 0.9rem;
        }

        /* Enhanced Main Content */
        .main-content {
            background: var(--bg-primary);
            overflow-y: auto;
            position: relative;
        }

        .content-header {
            padding: 2rem;
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: var(--blur-md);
            border-bottom: 1px solid var(--border-glass);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .greeting {
            font-size: 2.25rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .greeting-subtitle {
            color: var(--text-muted);
            font-size: 1rem;
            font-weight: 400;
            margin-bottom: 2rem;
        }

        .header-actions {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            backdrop-filter: var(--blur-sm);
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-glass);
        }

        .btn-secondary {
            background: var(--bg-glass);
            color: var(--text-primary);
            border: 1px solid var(--border-glass);
        }

        .btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: var(--shadow-glass-lg);
        }

        .btn-primary:hover {
            box-shadow: 0 20px 60px rgba(99, 102, 241, 0.4);
        }

        .header-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .stat-chip {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-md);
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            backdrop-filter: var(--blur-md);
            transition: all 0.3s ease;
        }

        .stat-chip:hover {
            background: var(--bg-glass-strong);
            transform: translateY(-2px);
        }

        .stat-chip i {
            color: var(--accent-primary);
            font-size: 0.85rem;
        }

        .stat-value {
            color: var(--text-primary);
            font-weight: 700;
        }

        /* Enhanced Content Body */
        .content-body {
            padding: 2rem;
        }

        .page {
            display: none;
            animation: fadeInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .page.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Enhanced ATLAS Chat */
        .atlas-chat {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: var(--blur-lg);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-2xl);
            margin-bottom: 3rem;
            overflow: hidden;
            box-shadow: var(--shadow-glass-lg);
            position: relative;
        }

        .atlas-chat::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-glass);
            opacity: 0.7;
            pointer-events: none;
        }

        .chat-header {
            padding: 2rem 2rem 1rem;
            background: var(--gradient-primary);
            color: white;
            position: relative;
            z-index: 2;
        }

        .chat-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            letter-spacing: -0.01em;
        }

        .chat-header p {
            opacity: 0.9;
            font-size: 0.9rem;
            font-weight: 400;
        }

        .chat-input-area {
            padding: 2rem;
            position: relative;
            z-index: 2;
        }

        .chat-input-wrapper {
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: var(--blur-md);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-glass);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .chat-input-wrapper:focus-within {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
            background: rgba(255, 255, 255, 0.08);
        }

        #questionInput {
            width: 100%;
            background: transparent;
            border: none;
            padding: 1.5rem;
            color: var(--text-primary);
            font-size: 0.95rem;
            resize: none;
            min-height: 100px;
            font-family: inherit;
            line-height: 1.6;
            font-weight: 400;
        }

        #questionInput:focus {
            outline: none;
        }

        #questionInput::placeholder {
            color: var(--text-muted);
            font-weight: 400;
        }

        .input-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-glass-light);
            background: rgba(255, 255, 255, 0.02);
        }

        .input-hint {
            color: var(--text-muted);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 400;
        }

        #askButton {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: var(--shadow-glass);
            font-size: 0.85rem;
        }

        #askButton:hover:not(:disabled) {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
        }

        #askButton:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Enhanced Answer Container */
        .answer-container {
            margin-top: 2rem;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: var(--blur-md);
            border-radius: var(--radius-lg);
            display: none;
            overflow: hidden;
            border: 1px solid var(--border-glass);
            box-shadow: var(--shadow-glass);
        }

        .answer-text {
            padding: 2rem;
            white-space: pre-wrap;
            line-height: 1.7;
            font-size: 0.95rem;
            font-weight: 400;
        }

        .answer-actions {
            padding: 1rem 2rem;
            border-top: 1px solid var(--border-glass-light);
            background: rgba(255, 255, 255, 0.02);
            display: flex;
            gap: 0.75rem;
        }

        .feedback-btn {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feedback-btn:hover {
            background: var(--bg-glass-strong);
            transform: translateY(-1px);
        }

        /* Enhanced Quick Actions */
        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .action-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: var(--blur-md);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-lg);
            padding: 2rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-decoration: none;
            color: inherit;
            display: block;
            position: relative;
            overflow: hidden;
        }

        .action-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .action-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-glass-lg);
        }

        .action-card:hover::before {
            opacity: 0.08;
        }

        .action-icon {
            width: 52px;
            height: 52px;
            border-radius: var(--radius-md);
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            color: white;
            position: relative;
            z-index: 1;
            box-shadow: var(--shadow-glass);
            transition: all 0.3s ease;
        }

        .action-card:hover .action-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .action-card.green .action-icon { background: var(--gradient-secondary); }
        .action-card.warm .action-icon { background: var(--gradient-warm); }
        .action-card.info .action-icon { background: linear-gradient(135deg, var(--accent-info), var(--accent-primary)); }

        .action-title {
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            position: relative;
            z-index: 1;
            letter-spacing: -0.01em;
        }

        .action-description {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        /* Enhanced Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: var(--blur-lg);
            z-index: 1000;
            padding: 2rem;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: var(--blur-lg);
            border-radius: var(--radius-2xl);
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid var(--border-glass);
            box-shadow: var(--shadow-glass-lg);
            position: relative;
        }

        .modal-content::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-glass);
            opacity: 0.3;
            pointer-events: none;
            border-radius: var(--radius-2xl);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
            z-index: 2;
        }

        .modal-close {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0.5rem;
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
            backdrop-filter: var(--blur-sm);
        }

        .modal-close:hover {
            background: var(--bg-glass-strong);
            color: var(--text-primary);
        }

        /* Enhanced Check-in Modal */
        .mood-slider {
            margin: 2rem 0;
            position: relative;
            z-index: 2;
        }

        .mood-slider label {
            display: block;
            margin-bottom: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .slider-container {
            position: relative;
            margin: 1.5rem 0;
        }

        .mood-range {
            width: 100%;
            height: 6px;
            border-radius: var(--radius-full);
            background: var(--bg-glass-strong);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .mood-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: var(--radius-full);
            background: var(--gradient-primary);
            cursor: pointer;
            box-shadow: var(--shadow-glass);
            transition: all 0.2s ease;
        }

        .mood-range::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .mood-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.75rem;
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .mood-descriptors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 0.75rem;
            margin: 2rem 0;
            position: relative;
            z-index: 2;
        }

        .mood-descriptor {
            padding: 0.875rem 1rem;
            background: var(--bg-glass);
            backdrop-filter: var(--blur-sm);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-md);
            cursor: pointer;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-weight: 500;
            font-size: 0.85rem;
        }

        .mood-descriptor:hover {
            border-color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.1);
            transform: translateY(-2px) scale(1.05);
        }

        .mood-descriptor.selected {
            border-color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.2);
            color: var(--accent-primary);
            box-shadow: var(--shadow-glow);
        }

        .quick-notes-input {
            width: 100%;
            background: var(--bg-glass);
            backdrop-filter: var(--blur-sm);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-md);
            padding: 1rem;
            color: var(--text-primary);
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
            font-size: 0.9rem;
            font-weight: 400;
            position: relative;
            z-index: 2;
        }

        .quick-notes-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
        }

        /* Training Session Styles */
        .training-session {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: var(--blur-md);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-glass);
        }

        .training-question {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .training-input {
            width: 100%;
            background: var(--bg-glass);
            backdrop-filter: var(--blur-sm);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-md);
            padding: 1rem;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            min-height: 80px;
            resize: vertical;
            margin-bottom: 1rem;
        }

        .training-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
        }

        .training-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Weather Widget */
        .weather-widget {
            background: var(--bg-glass);
            backdrop-filter: var(--blur-md);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-glass);
        }

        .weather-current {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .weather-icon {
            font-size: 2rem;
            color: var(--accent-warning);
        }

        .weather-temp {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .weather-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Enhanced Settings */
        .settings-section {
            margin-bottom: 2rem;
            position: relative;
            z-index: 2;
        }

        .settings-section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .settings-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-md);
            margin-bottom: 0.75rem;
            transition: all 0.2s ease;
        }

        .settings-toggle:hover {
            background: var(--bg-glass-strong);
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--accent-primary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: var(--radius-full);
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-glass);
        }

        .toggle-switch.active::after {
            transform: translateX(20px);
        }

        /* Loading and Animations */
        .loading {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--accent-primary);
            font-weight: 500;
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .pulse-animation {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Success Animation */
        .success-animation {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            padding: 2rem;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .success-icon {
            width: 72px;
            height: 72px;
            border-radius: var(--radius-full);
            background: var(--gradient-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            animation: bounce 0.6s ease;
            box-shadow: var(--shadow-glow);
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
            40%, 43% { transform: translateY(-20px); }
            70% { transform: translateY(-10px); }
            90% { transform: translateY(-4px); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100vh;
                width: 280px;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 200;
            }

            .sidebar.mobile-visible {
                transform: translateX(0);
            }

            .mobile-toggle {
                display: block;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 300;
                background: var(--bg-glass);
                backdrop-filter: var(--blur-md);
                border: 1px solid var(--border-glass);
                border-radius: var(--radius-md);
                padding: 0.75rem;
                cursor: pointer;
                color: var(--text-primary);
            }

            .content-header {
                padding: 1rem;
                padding-left: 4rem;
            }

            .content-body {
                padding: 1rem;
            }

            .greeting {
                font-size: 1.8rem;
            }

            .quick-actions {
                grid-template-columns: 1fr;
            }
        }

        .mobile-toggle {
            display: none;
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-md);
            color: white;
            z-index: 1001;
            animation: slideIn 0.3s ease;
            font-weight: 500;
            box-shadow: var(--shadow-glass-lg);
            backdrop-filter: var(--blur-md);
        }

        .notification.success { background: var(--accent-success); }
        .notification.error { background: var(--accent-error); }
        .notification.info { background: var(--accent-info); }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* No Data State */
        .no-data {
            color: var(--text-muted);
            font-style: italic;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Mobile Toggle -->
    <button class="mobile-toggle" onclick="toggleMobileNav()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="container">
        <!-- Enhanced Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="ai-avatar" onclick="playGreeting()">
                    <i class="fas fa-robot"></i>
                </div>
                <h2 class="ai-name">ATLAS</h2>
                <div class="ai-status">
                    <div class="status-dot"></div>
                    Ready to assist
                </div>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-page="insights">
                    <i class="fas fa-chart-line"></i>
                    <span>Smart Insights</span>
                </div>
                <div class="nav-item" data-page="health">
                    <i class="fas fa-heart"></i>
                    <span>Health & Wellness</span>
                </div>
                <div class="nav-item" data-page="studio">
                    <i class="fas fa-video"></i>
                    <span>Studio</span>
                </div>
                <div class="nav-item" data-page="training">
                    <i class="fas fa-graduation-cap"></i>
                    <span>AI Training</span>
                </div>
                <div class="nav-item" data-page="integrations">
                    <i class="fas fa-plug"></i>
                    <span>Integrations</span>
                </div>
                <div class="nav-item" onclick="openSettings()">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>
        </nav>

        <!-- Enhanced Main Content -->
        <main class="main-content">
            <!-- Enhanced Header -->
            <div class="content-header">
                <h1 class="greeting" id="greetingText">Welcome back, Michael</h1>
                <p class="greeting-subtitle">Your AI companion is here to help with your creative workflow</p>
                
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="refreshData()">
                        <i class="fas fa-sync-alt"></i>
                        Sync Data
                    </button>
                    <button class="btn btn-primary" onclick="openQuickCheckIn()">
                        <i class="fas fa-heart"></i>
                        Check-in
                    </button>
                    <button class="btn btn-primary" onclick="focusChat()">
                        <i class="fas fa-comments"></i>
                        Chat with ATLAS
                    </button>
                </div>

                <div class="header-stats">
                    <div class="stat-chip">
                        <i class="fas fa-calendar-day"></i>
                        <span>Today: <span class="stat-value" id="todayEvents">--</span></span>
                    </div>
                    <div class="stat-chip">
                        <i class="fas fa-envelope"></i>
                        <span>Unread: <span class="stat-value" id="unreadEmails">--</span></span>
                    </div>
                    <div class="stat-chip">
                        <i class="fas fa-heartbeat"></i>
                        <span>Health: <span class="stat-value" id="systemStatus">--</span></span>
                    </div>
                    <div class="stat-chip">
                        <i class="fas fa-cloud-sun"></i>
                        <span>Weather: <span class="stat-value" id="weatherStatus">--</span></span>
                    </div>
                </div>
            </div>

            <!-- Enhanced Content Body -->
            <div class="content-body">
                <!-- Dashboard Page -->
                <div class="page active" id="dashboard">
                    <!-- Weather Widget -->
                    <div class="weather-widget">
                        <h3 class="section-title">Current Weather</h3>
                        <div class="weather-current">
                            <div class="weather-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div>
                                <div class="weather-temp" id="weatherTemp">--Â°F</div>
                                <div class="weather-desc" id="weatherDesc">Loading weather data...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced ATLAS Chat -->
                    <div class="atlas-chat">
                        <div class="chat-header">
                            <h2><i class="fas fa-robot"></i> Chat with ATLAS</h2>
                            <p>Your AI companion for creative and business support</p>
                        </div>
                        <div class="chat-input-area">
                            <div class="chat-input-wrapper">
                                <textarea 
                                    id="questionInput" 
                                    placeholder="Ask ATLAS anything - from creative ideas to business insights, calendar management to project planning..."
                                    rows="3"
                                ></textarea>
                                <div class="input-actions">
                                    <div class="input-hint">
                                        <i class="fas fa-keyboard"></i>
                                        Enter to send
                                    </div>
                                    <button id="askButton" onclick="askQuestion()">
                                        <i class="fas fa-paper-plane"></i>
                                        Send
                                    </button>
                                </div>
                            </div>
                            
                            <div id="answerContainer" class="answer-container">
                                <div id="answerText" class="answer-text"></div>
                                <div class="answer-actions">
                                    <button class="feedback-btn" onclick="giveFeedback('helpful')">
                                        <i class="fas fa-thumbs-up"></i>
                                        Helpful
                                    </button>
                                    <button class="feedback-btn" onclick="giveFeedback('needs-work')">
                                        <i class="fas fa-thumbs-down"></i>
                                        Needs Work
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Quick Actions -->
                    <h3 class="section-title">Quick Actions</h3>
                    <div class="quick-actions">
                        <div class="action-card" onclick="openQuickNotes()">
                            <div class="action-icon">
                                <i class="fas fa-sticky-note"></i>
                            </div>
                            <div class="action-title">Quick Notes</div>
                            <div class="action-description">Capture thoughts and ideas instantly - they'll auto-organize in Notion</div>
                        </div>

                        <div class="action-card green" onclick="openBrainDump()">
                            <div class="action-icon">
                                <i class="fas fa-microphone"></i>
                            </div>
                            <div class="action-title">Voice Notes</div>
                            <div class="action-description">Voice record your thoughts and I'll transcribe and organize them</div>
                        </div>

                        <div class="action-card warm" onclick="openQuickCheckIn()">
                            <div class="action-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="action-title">Wellness Check-in</div>
                            <div class="action-description">Track your mood, energy, and wellbeing patterns</div>
                        </div>

                        <div class="action-card info" onclick="showPage('training')">
                            <div class="action-icon">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <div class="action-title">Train ATLAS</div>
                            <div class="action-description">Interactive session to help ATLAS learn your preferences</div>
                        </div>

                        <div class="action-card" onclick="showPage('studio')">
                            <div class="action-icon">
                                <i class="fas fa-video"></i>
                            </div>
                            <div class="action-title">Studio Dashboard</div>
                            <div class="action-description">Rocket Launch Studio projects and creative workflow</div>
                        </div>

                        <div class="action-card green" onclick="generateComprehensiveDebrief()">
                            <div class="action-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="action-title">Weekly Analysis</div>
                            <div class="action-description">AI analysis of your productivity and patterns</div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Training Page -->
                <div class="page" id="training">
                    <h2 class="section-title">Interactive AI Training</h2>
                    <div class="training-session" id="trainingSession" style="display: none;">
                        <div class="training-question" id="trainingQuestion"></div>
                        <textarea class="training-input" id="trainingAnswer" placeholder="Share your thoughts here..."></textarea>
                        <div class="training-actions">
                            <button class="btn btn-secondary" onclick="skipTrainingQuestion()">
                                <i class="fas fa-forward"></i>
                                Skip
                            </button>
                            <button class="btn btn-primary" onclick="submitTrainingAnswer()">
                                <i class="fas fa-check"></i>
                                Submit Answer
                            </button>
                        </div>
                    </div>
                    
                    <div class="action-card" id="startTrainingCard">
                        <div class="action-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="action-title">Start Training Session</div>
                        <div class="action-description">Help ATLAS learn about your preferences, habits, and personality through guided questions</div>
                        <button class="btn btn-primary" style="margin-top: 1rem;" onclick="startTrainingSession()">
                            <i class="fas fa-play"></i>
                            Begin Training
                        </button>
                    </div>
                </div>

                <!-- Enhanced Insights Page -->
                <div class="page" id="insights">
                    <h2 class="section-title">Smart Insights & Analytics</h2>
                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="action-title">Generate Deep Insights</div>
                        <div class="action-description">AI-powered analysis of your productivity patterns, calendar events, and workflow</div>
                        <button class="btn btn-primary" style="margin-top: 1rem;" onclick="generateComprehensiveDebrief()">
                            <i class="fas fa-magic"></i>
                            Analyze My Data
                        </button>
                    </div>
                </div>

                <!-- Enhanced Health Page -->
                <div class="page" id="health">
                    <h2 class="section-title">Health & Wellness</h2>
                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="action-title">Health Data Upload</div>
                        <div class="action-description">Upload your Apple Health export for comprehensive wellness tracking and insights</div>
                        <button class="btn btn-primary" style="margin-top: 1rem;" onclick="uploadHealthData()">
                            <i class="fas fa-upload"></i>
                            Upload Health Data
                        </button>
                    </div>
                </div>

                <!-- Enhanced Studio Page -->
                <div class="page" id="studio">
                    <h2 class="section-title">Rocket Launch Studio</h2>
                    <div class="quick-actions">
                        <div class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-video"></i>
                            </div>
                            <div class="action-title">Active Projects</div>
                            <div class="action-description">View and manage current video productions</div>
                        </div>
                        <div class="action-card green">
                            <div class="action-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="action-title">Client Management</div>
                            <div class="action-description">Access client communications and project files</div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Integrations Page -->
                <div class="page" id="integrations">
                    <h2 class="section-title">Connected Services</h2>
                    <div id="integrationsList" class="quick-actions">
                        <div class="loading">
                            <i class="fas fa-spinner"></i>
                            Loading integrations...
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Enhanced Quick Check-in Modal -->
    <div class="modal" id="checkinModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-heart"></i> Wellness Check-in</h2>
                <button class="modal-close" onclick="closeCheckIn()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="mood-slider">
                <label>Energy Level</label>
                <div class="slider-container">
                    <input type="range" class="mood-range" id="energySlider" min="1" max="10" value="5">
                    <div class="mood-labels">
                        <span>Low</span>
                        <span>Moderate</span>
                        <span>High</span>
                    </div>
                </div>
            </div>

            <div class="mood-slider">
                <label>Focus Level</label>
                <div class="slider-container">
                    <input type="range" class="mood-range" id="focusSlider" min="1" max="10" value="5">
                    <div class="mood-labels">
                        <span>Scattered</span>
                        <span>Balanced</span>
                        <span>Sharp</span>
                    </div>
                </div>
            </div>

            <div class="mood-descriptors">
                <div class="mood-descriptor" data-mood="creative">Creative</div>
                <div class="mood-descriptor" data-mood="productive">Productive</div>
                <div class="mood-descriptor" data-mood="relaxed">Relaxed</div>
                <div class="mood-descriptor" data-mood="motivated">Motivated</div>
                <div class="mood-descriptor" data-mood="stressed">Stressed</div>
                <div class="mood-descriptor" data-mood="inspired">Inspired</div>
                <div class="mood-descriptor" data-mood="focused">Focused</div>
                <div class="mood-descriptor" data-mood="energetic">Energetic</div>
                <div class="mood-descriptor" data-mood="calm">Calm</div>
                <div class="mood-descriptor" data-mood="ambitious">Ambitious</div>
                <div class="mood-descriptor" data-mood="thoughtful">Thoughtful</div>
                <div class="mood-descriptor" data-mood="determined">Determined</div>
            </div>

            <textarea class="quick-notes-input" id="checkinNotes" placeholder="Any specific thoughts or observations about your current state?"></textarea>

            <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="submitCheckIn()">
                <i class="fas fa-heart"></i>
                Submit Check-in
            </button>
        </div>
    </div>

    <!-- Enhanced Quick Notes Modal -->
    <div class="modal" id="notesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-sticky-note"></i> Quick Notes</h2>
                <button class="modal-close" onclick="closeQuickNotes()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <textarea class="quick-notes-input" id="quickNotesText" placeholder="Capture your thoughts, ideas, reminders, or anything else. ATLAS will automatically organize this in your workspace."></textarea>

            <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="saveQuickNote()">
                <i class="fas fa-save"></i>
                Save & Organize
            </button>
        </div>
    </div>

    <!-- Enhanced Brain Dump Modal -->
    <div class="modal" id="brainDumpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-microphone"></i> Voice Notes</h2>
                <button class="modal-close" onclick="closeBrainDump()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div style="text-align: center; margin-bottom: 2rem; color: var(--text-muted); position: relative; z-index: 2;">
                Speak your thoughts, and ATLAS will transcribe and organize everything for you
            </div>
            <button class="btn btn-primary" id="voiceBtn" onclick="toggleVoiceRecording()" style="width: 100%; margin-bottom: 2rem;">
                <i class="fas fa-microphone"></i>
                <span id="voiceBtnText">Start Recording</span>
            </button>
            <div id="transcriptionText" style="padding: 1rem; background: var(--bg-glass); border: 1px solid var(--border-glass); border-radius: var(--radius-md); min-height: 100px; color: var(--text-muted); font-style: italic; position: relative; z-index: 2;">
                Your transcription will appear here...
            </div>
        </div>
    </div>

    <!-- Enhanced Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="success-animation">
                <div class="success-icon">
                    <i class="fas fa-check"></i>
                </div>
                <h2>Thank you, Michael!</h2>
                <p id="successMessage">Your check-in has been recorded successfully.</p>
                <button class="btn btn-primary" onclick="closeSuccess()" style="margin-top: 1rem;">
                    <i class="fas fa-check"></i>
                    Continue
                </button>
            </div>
        </div>
    </div>

    <!-- Enhanced Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Settings</h2>
                <button class="modal-close" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="settings-section">
                <h3>Notifications</h3>
                <div class="settings-toggle">
                    <span>Daily wellness reminders</span>
                    <div class="toggle-switch" data-setting="wellness-reminders"></div>
                </div>
                <div class="settings-toggle">
                    <span>Calendar sync notifications</span>
                    <div class="toggle-switch active" data-setting="calendar-sync"></div>
                </div>
                <div class="settings-toggle">
                    <span>Project deadline alerts</span>
                    <div class="toggle-switch active" data-setting="deadline-alerts"></div>
                </div>
            </div>

            <div class="settings-section">
                <h3>AI Behavior</h3>
                <div class="settings-toggle">
                    <span>Proactive suggestions</span>
                    <div class="toggle-switch active" data-setting="proactive-ai"></div>
                </div>
                <div class="settings-toggle">
                    <span>Auto-organize notes</span>
                    <div class="toggle-switch active" data-setting="auto-organize"></div>
                </div>
                <div class="settings-toggle">
                    <span>Learning mode</span>
                    <div class="toggle-switch active" data-setting="learning-mode"></div>
                </div>
            </div>

            <div class="settings-section">
                <h3>Privacy</h3>
                <div class="settings-toggle">
                    <span>Anonymous analytics</span>
                    <div class="toggle-switch" data-setting="analytics"></div>
                </div>
                <div class="settings-toggle">
                    <span>Data export available</span>
                    <div class="toggle-switch active" data-setting="data-export"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentPage = 'dashboard';
        let selectedMoods = [];
        let isRecording = false;
        let recognition = null;
        let trainingQuestions = [
            "What time of day do you feel most creative and productive?",
            "How do you prefer to receive feedback on your work?",
            "What are your biggest productivity challenges?",
            "How do you like to organize your projects and tasks?",
            "What motivates you most in your creative work?",
            "How do you prefer to communicate with clients?",
            "What tools and workflows work best for you?",
            "How do you manage stress and maintain work-life balance?"
        ];
        let currentTrainingIndex = 0;

        // Initialize speech recognition
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'en-US';
        }

        // Navigation
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const pageElement = document.getElementById(pageName);
            if (pageElement) {
                pageElement.classList.add('active');
            }
            
            const navItem = document.querySelector(`[data-page="${pageName}"]`);
            if (navItem) {
                navItem.classList.add('active');
            }
            
            currentPage = pageName;
            
            if (pageName === 'integrations') {
                loadIntegrations();
            } else if (pageName === 'dashboard') {
                loadDashboardData();
            }
            
            closeMobileNav();
        }

        // Navigation event listeners
        document.querySelectorAll('.nav-item[data-page]').forEach(item => {
            item.addEventListener('click', () => {
                const page = item.getAttribute('data-page');
                showPage(page);
            });
        });

        // Mobile navigation
        function toggleMobileNav() {
            document.getElementById('sidebar').classList.toggle('mobile-visible');
        }

        function closeMobileNav() {
            document.getElementById('sidebar').classList.remove('mobile-visible');
        }

        // Greeting
        function updateGreeting() {
            const now = new Date();
            const hour = now.getHours();
            let greeting;
            
            if (hour < 12) {
                greeting = "Good morning, Michael";
            } else if (hour < 17) {
                greeting = "Good afternoon, Michael";
            } else {
                greeting = "Good evening, Michael";
            }
            
            document.getElementById('greetingText').textContent = greeting;
        }

        function playGreeting() {
            document.querySelector('.ai-avatar').classList.add('pulse-animation');
            setTimeout(() => {
                document.querySelector('.ai-avatar').classList.remove('pulse-animation');
            }, 2000);
            
            showNotification('Hello Michael! ATLAS is ready to assist you today.', 'info');
        }

        // Chat functionality
        function focusChat() {
            document.getElementById('questionInput').focus();
            document.getElementById('questionInput').scrollIntoView({ behavior: 'smooth' });
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                askQuestion();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const questionInput = document.getElementById('questionInput');
            if (questionInput) {
                questionInput.addEventListener('keydown', handleKeyPress);
            }
        });

        async function askQuestion(predefinedQuestion = null) {
            const input = document.getElementById('questionInput');
            const button = document.getElementById('askButton');
            const answerContainer = document.getElementById('answerContainer');
            const answerText = document.getElementById('answerText');

            const question = predefinedQuestion || input.value.trim();
            if (!question) return;

            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Thinking...';
            answerContainer.style.display = 'block';
            answerText.innerHTML = '<div class="loading"><i class="fas fa-brain fa-pulse"></i> Processing your question...</div>';

            try {
                const response = await fetch('/ask?q=' + encodeURIComponent(question));
                const data = await response.json();

                if (response.ok) {
                    answerText.textContent = data.answer;
                } else {
                    answerText.innerHTML = `<div style="color: var(--accent-error);">Error: ${data.detail || 'Failed to get answer'}</div>`;
                }
            } catch (error) {
                answerText.innerHTML = `<div style="color: var(--accent-error);">Network error: ${error.message}</div>`;
            } finally {
                button.disabled = false;
                button.innerHTML = '<i class="fas fa-paper-plane"></i> Send';
                if (!predefinedQuestion) {
                    input.value = '';
                }
            }
        }

        // Training Session
        function startTrainingSession() {
            currentTrainingIndex = 0;
            document.getElementById('startTrainingCard').style.display = 'none';
            document.getElementById('trainingSession').style.display = 'block';
            showTrainingQuestion();
        }

        function showTrainingQuestion() {
            if (currentTrainingIndex < trainingQuestions.length) {
                document.getElementById('trainingQuestion').textContent = trainingQuestions[currentTrainingIndex];
                document.getElementById('trainingAnswer').value = '';
                document.getElementById('trainingAnswer').focus();
            } else {
                finishTrainingSession();
            }
        }

        function submitTrainingAnswer() {
            const answer = document.getElementById('trainingAnswer').value.trim();
            if (!answer) {
                showNotification('Please provide an answer before continuing.', 'warning');
                return;
            }

            console.log(`Training Q${currentTrainingIndex + 1}:`, trainingQuestions[currentTrainingIndex]);
            console.log(`Training A${currentTrainingIndex + 1}:`, answer);

            currentTrainingIndex++;
            showTrainingQuestion();
        }

        function skipTrainingQuestion() {
            currentTrainingIndex++;
            showTrainingQuestion();
        }

        function finishTrainingSession() {
            document.getElementById('trainingSession').style.display = 'none';
            document.getElementById('startTrainingCard').style.display = 'block';
            showSuccess('Training session completed! ATLAS has learned more about your preferences.');
        }

        // Quick Check-in
        function openQuickCheckIn() {
            document.getElementById('checkinModal').classList.add('active');
        }

        function closeCheckIn() {
            document.getElementById('checkinModal').classList.remove('active');
            selectedMoods = [];
            document.querySelectorAll('.mood-descriptor').forEach(desc => {
                desc.classList.remove('selected');
            });
        }

        // Mood descriptor selection
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.mood-descriptor').forEach(desc => {
                desc.addEventListener('click', () => {
                    const mood = desc.getAttribute('data-mood');
                    if (selectedMoods.includes(mood)) {
                        selectedMoods = selectedMoods.filter(m => m !== mood);
                        desc.classList.remove('selected');
                    } else {
                        selectedMoods.push(mood);
                        desc.classList.add('selected');
                    }
                });
            });

            // Settings toggles
            document.querySelectorAll('.toggle-switch').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    toggle.classList.toggle('active');
                    const setting = toggle.getAttribute('data-setting');
                    console.log(`Setting ${setting}:`, toggle.classList.contains('active'));
                });
            });
        });

        function submitCheckIn() {
            const energy = document.getElementById('energySlider').value;
            const focus = document.getElementById('focusSlider').value;
            const notes = document.getElementById('checkinNotes').value;
            
            const checkinData = {
                energy: energy,
                focus: focus,
                moods: selectedMoods,
                notes: notes,
                timestamp: new Date().toISOString()
            };
            
            console.log('Check-in data:', checkinData);
            
            closeCheckIn();
            
            // Auto-close success modal after 2 seconds
            showSuccess('Your wellness check-in has been recorded successfully.');
            setTimeout(() => {
                closeSuccess();
            }, 2000);
        }

        // Quick Notes
        function openQuickNotes() {
            document.getElementById('notesModal').classList.add('active');
        }

        function closeQuickNotes() {
            document.getElementById('notesModal').classList.remove('active');
        }

        function saveQuickNote() {
            const noteText = document.getElementById('quickNotesText').value.trim();
            if (!noteText) return;
            
            console.log('Saving note:', noteText);
            
            closeQuickNotes();
            showSuccess('Your note has been saved and organized!');
            document.getElementById('quickNotesText').value = '';
        }

        // Brain Dump (Voice Recording)
        function openBrainDump() {
            document.getElementById('brainDumpModal').classList.add('active');
        }

        function closeBrainDump() {
            document.getElementById('brainDumpModal').classList.remove('active');
            if (isRecording) {
                toggleVoiceRecording();
            }
        }

        function toggleVoiceRecording() {
            const btn = document.getElementById('voiceBtn');
            const btnText = document.getElementById('voiceBtnText');
            
            if (!recognition) {
                showNotification('Speech recognition not supported in this browser', 'error');
                return;
            }
            
            if (!isRecording) {
                recognition.start();
                isRecording = true;
                btnText.textContent = 'Stop Recording';
                btn.style.background = 'var(--gradient-warm)';
                
                recognition.onresult = (event) => {
                    let transcript = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                    }
                    document.getElementById('transcriptionText').textContent = transcript;
                };
            } else {
                recognition.stop();
                isRecording = false;
                btnText.textContent = 'Start Recording';
                btn.style.background = 'var(--gradient-primary)';
            }
        }

        // Comprehensive Debrief
        function generateComprehensiveDebrief() {
            askQuestion('Please provide a comprehensive analysis of my productivity patterns, schedule, and any insights you can gather from my available data.');
        }

        // Success Modal
        function showSuccess(message) {
            document.getElementById('successMessage').textContent = message;
            document.getElementById('successModal').classList.add('active');
        }

        function closeSuccess() {
            document.getElementById('successModal').classList.remove('active');
        }

        // Settings
        function openSettings() {
            document.getElementById('settingsModal').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settingsModal').classList.remove('active');
        }

        function giveFeedback(type) {
            console.log('Feedback:', type);
            const message = type === 'helpful' ? 'Thank you for the positive feedback!' : 'Thanks for the feedback. ATLAS will continue learning.';
            showNotification(message, 'success');
        }

        // Health Data Upload
        function uploadHealthData() {
            showNotification('Health data upload feature will be available soon.', 'info');
        }

        // Weather
        function loadWeather() {
            // Placeholder for weather API integration
            document.getElementById('weatherStatus').innerHTML = '<span class="no-data">--</span>';
            document.getElementById('weatherTemp').innerHTML = '<span class="no-data">--Â°F</span>';
            document.getElementById('weatherDesc').textContent = 'Weather data unavailable';
        }

        // Data loading functions
        function loadDashboardData() {
            updateGreeting();
            loadSystemHealth();
            loadTodayEvents();
            loadWeather();
        }

        function loadSystemHealth() {
            fetch('/status')
                .then(response => response.json())
                .then(data => {
                    const healthPercentage = data.ready ? '98%' : '--';
                    document.getElementById('systemStatus').innerHTML = data.ready ? healthPercentage : '<span class="no-data">--</span>';
                })
                .catch(() => {
                    document.getElementById('systemStatus').innerHTML = '<span class="no-data">--</span>';
                });
        }

        function loadTodayEvents() {
            fetch('/calendar/today')
                .then(response => response.json())
                .then(data => {
                    const eventCount = data.events ? data.events.length : '--';
                    document.getElementById('todayEvents').innerHTML = eventCount !== '--' ? eventCount : '<span class="no-data">--</span>';
                })
                .catch(() => {
                    document.getElementById('todayEvents').innerHTML = '<span class="no-data">--</span>';
                });
        }

        function loadIntegrations() {
            fetch('/integrations')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('integrationsList');
                    container.innerHTML = '';
                    
                    data.integrations.forEach(integration => {
                        const card = document.createElement('div');
                        card.className = 'action-card';
                        
                        const statusColor = integration.connected ? 'var(--accent-success)' : 'var(--accent-warning)';
                        const statusIcon = integration.connected ? 'check-circle' : 'exclamation-circle';
                        
                        card.innerHTML = `
                            <div class="action-icon">
                                <i class="fas fa-${getIntegrationIcon(integration.name)}"></i>
                            </div>
                            <div class="action-title">${integration.name}</div>
                            <div class="action-description">
                                <i class="fas fa-${statusIcon}" style="color: ${statusColor};"></i>
                                ${integration.status_message}
                            </div>
                        `;
                        container.appendChild(card);
                    });
                })
                .catch(() => {
                    document.getElementById('integrationsList').innerHTML = '<div style="color: var(--accent-error);">Failed to load integrations</div>';
                });
        }

        function getIntegrationIcon(name) {
            const icons = {
                'Google Calendar': 'calendar-alt',
                'Gmail': 'envelope',
                'Google Drive': 'cloud',
                'Notion': 'sticky-note',
                'Dubsado': 'briefcase',
                'QuickBooks': 'calculator',
                'Apple Health': 'heart',
                'HomeKit': 'home',
                'Philips Hue': 'lightbulb'
            };
            return icons[name] || 'plug';
        }

        function refreshData() {
            showNotification('Syncing your data...', 'info');
            loadDashboardData();
            if (currentPage === 'integrations') {
                loadIntegrations();
            }
            setTimeout(() => {
                showNotification('Data sync completed successfully.', 'success');
            }, 1500);
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            
            // Auto-refresh every 5 minutes
            setInterval(() => {
                if (currentPage === 'dashboard') {
                    loadDashboardData();
                }
            }, 300000);
            
            // Update greeting every hour
            setInterval(updateGreeting, 3600000);
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                closeMobileNav();
            }
        });

        // Close modals when clicking outside
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('active');
                    }
                });
            });
        });
    </script>
</body>
</html>
